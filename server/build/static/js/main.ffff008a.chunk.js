(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{169:function(e,t,a){},174:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),o=a.n(s),c=(a(95),a(10)),i=a(11),l=a(13),u=a(12),p=a(14),m=(a(96),a(28)),h=a(36),d=a(6),f=a.n(d),g=a(89);var v={fetch:function(e){var t,a,n=arguments;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.length>1&&void 0!==n[1]?n[1]:{},r.next=3,f.a.awrap(fetch("/api/v1/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(g.a)({token:localStorage.getItem("token")},t))}));case 3:return a=r.sent,r.next=6,f.a.awrap(a.json());case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}))},admin:function(){var e=localStorage.getItem("admin");return"boolean"==typeof e?e:"true"==localStorage.getItem("admin")}},E=(a(98),a(2)),b=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:""},a.sizings={lg:{size:4,offset:4},md:{size:6,offset:3},sm:{size:8,offset:2},xs:{size:10,offset:1}},a.handleSubmit=function(e){var t,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.next=3,f.a.awrap(v.fetch("auth/login",{username:a.state.username,password:a.state.password}));case 3:if(null!==(t=r.sent).error){r.next=14;break}return localStorage.setItem("token",t.token),r.next=8,f.a.awrap(v.fetch("auth"));case 8:n=r.sent,localStorage.setItem("username",n.username),localStorage.setItem("admin",n.admin),a.props.history.push("/dashboard"),r.next=15;break;case 14:a.setState({error:t.error});case 15:case"end":return r.stop()}}))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")&&this.props.history.replace("/dashboard")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Strempfer IoT"),r.a.createElement("p",null,this.state.error),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(E.d,null,r.a.createElement(E.r,null,r.a.createElement(E.b,this.sizings,r.a.createElement(E.e,{type:"text",name:"username",placeholder:"Username",onChange:function(t){return e.setState({username:t.target.value})}}))),r.a.createElement(E.r,null,r.a.createElement(E.b,this.sizings,r.a.createElement(E.e,{type:"password",name:"password",placeholder:"Password",onChange:function(t){return e.setState({password:t.target.value})}}))),r.a.createElement(E.r,null,r.a.createElement(E.b,this.sizings,r.a.createElement(E.e,{type:"submit",theme:"default",className:"btn btn-outline-primary",name:"submit",value:"Login",onClick:this.handleSubmit}))))))}}]),t}(n.Component),w=(a(169),a(22)),y=a(19),k=a(86),S=a(69),C=(a(174),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={current:"main",toggleOpen:!1,admin:!1},a.linkClick=function(e){return function(t){a.props.history.push(e),t.preventDefault()}},a.toggleNavbar=function(){a.setState({toggleOpen:!a.state.toggleOpen})},a.logout=function(){localStorage.removeItem("token"),a.props.history.push("/")},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")||this.props.history.replace("/login"),this.setState({admin:v.admin()})}},{key:"render",value:function(){return r.a.createElement("div",{className:"menu"},r.a.createElement(E.o,{type:"light",theme:"halftransparent",expand:"md"},r.a.createElement(E.p,{href:"#"},"Strempfer IoT"),r.a.createElement(E.q,{onClick:this.toggleNavbar}),r.a.createElement(E.c,{open:this.state.toggleOpen,navbar:!0},r.a.createElement(E.l,{navbar:!0},r.a.createElement(E.m,{active:"dashboard"===this.props.current},r.a.createElement(E.n,{active:"dashboard"===this.props.current,href:"",onClick:this.linkClick("/dashboard")},"Dashboard")),r.a.createElement(E.m,{active:"account"===this.props.current},r.a.createElement(E.n,{active:"account"===this.props.current,href:"",onClick:this.linkClick("/account")},"Account")),this.state.admin?r.a.createElement(E.m,{active:"users"===this.props.current},r.a.createElement(E.n,{active:"users"===this.props.current,href:"",onClick:this.linkClick("/users")},"Users")):null),r.a.createElement(E.l,{navbar:!0,className:"ml-auto"},r.a.createElement(E.a,{onClick:this.logout,outline:!0,pill:!0},"Logout ",r.a.createElement(w.a,{icon:y.d}))))))}}]),t}(n.Component)),O=Object(m.f)(C);function N(e){switch(e){case"lamp":return y.a;default:return y.c}}var j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={pressable:!1,iconColor:"#444"},a.cardClick=function(){a.props.history.push("/thing/".concat(a.props.uid))},a.btnClick=function(e){a.state.pressable&&e.stopPropagation()},a.handleButtonPress=function(e){e.stopPropagation(),a.buttonPressTimer=setTimeout((function(){a.props.history.push("/thing/".concat(a.props.uid))}),1500),a.startedPressing=Date.now()},a.handleButtonRelease=function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:Date.now()-a.startedPressing<1500&&a.state.pressable&&(a.startedPressing=0,console.log("BTN"),a.toggleBtn()),clearTimeout(a.buttonPressTimer);case 2:case"end":return e.stop()}}))},a.toggleBtn=function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(v.fetch("things/".concat(a.props.uid,"/setProp"),{prop:a.props.mainProp,value:String(!a.mainPropVal)}));case 2:return t.next=4,f.a.awrap(v.fetch("things/".concat(a.props.uid)));case 4:e=t.sent.thing,console.log(e),a.mainPropVal="true"==e.data[e.mainProp],a.updateMainState();case 8:case"end":return t.stop()}}))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.mainProp&&"boolean"===this.props.props[this.props.mainProp]&&(this.setState({pressable:!0}),this.mainPropVal="true"==this.props.data[this.props.mainProp],this.updateMainState(!0))}},{key:"updateMainState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.state.pressable||e)&&(this.mainPropVal?this.setState({iconColor:"#444"}):this.setState({iconColor:"#ddd"}))}},{key:"render",value:function(){var e=this;return r.a.createElement(E.b,{xs:"6",sm:"6",md:"3",lg:"2"},r.a.createElement(S.MobileView,null,r.a.createElement(k.a,{time:500,onLongPress:function(){return e.cardClick()},onPress:function(){e.state.pressable?e.toggleBtn():e.cardClick()}},r.a.createElement("div",{className:"thing card"},r.a.createElement("div",{className:"btn ".concat(this.state.pressable?"pressable":""),style:{borderColor:this.state.pressable?this.state.iconColor:void 0,cursor:this.state.pressable?"pointer":"default"}},r.a.createElement(w.a,{color:this.state.iconColor,size:"3x",icon:N(this.props.icon)})),r.a.createElement("span",{className:"name"},this.props.name)))),r.a.createElement(S.BrowserView,null,r.a.createElement("div",{className:"thing card",onClick:this.cardClick},r.a.createElement("div",{onClick:this.btnClick,onMouseDown:this.handleButtonPress,onMouseUp:this.handleButtonRelease,onMouseLeave:this.handleButtonRelease,className:"btn ".concat(this.state.pressable?"pressable":""),style:{borderColor:this.state.pressable?this.state.iconColor:void 0,cursor:this.state.pressable?"pointer":"default"}},r.a.createElement(w.a,{color:this.state.iconColor,size:"3x",icon:N(this.props.icon)})),r.a.createElement("span",{className:"name"},this.props.name))))}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={things:[]},a.listThings=function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(v.fetch("things/list"));case 2:e=t.sent,a.setState({things:e.things});case 4:case"end":return t.stop()}}))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.listThings()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"dashboard"},r.a.createElement(O,{current:"dashboard"}),r.a.createElement("h2",null,"Dashboard"),r.a.createElement("span",null,"Long press for more options"),r.a.createElement(E.d,null,r.a.createElement(E.r,null,this.state.things.map((function(t){return r.a.createElement(j,Object.assign({key:t.uid,history:e.props.history},t))})))))}}]),t}(n.Component),P=(a(177),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).colSize={lg:{size:6,offset:3},md:{size:8,offset:2},sm:{size:10,offset:1}},a.state={password:"",error:null},a.changePassword=function(e){a.setState({password:e.target.value})},a.setPassword=function(e){var t;return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SETTING"),e.next=3,f.a.awrap(v.fetch("auth/changePassword",{password:a.state.password}));case 3:(t=e.sent).error?a.setState({error:t.error}):a.setState({password:""});case 5:case"end":return e.stop()}}))},a.onKeyDown=function(e){"Enter"===e.key&&a.setPassword()},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(v.fetch("auth"));case 2:if(!(e=t.sent).error){t.next=6;break}return this.setState({error:e.error}),t.abrupt("return");case 6:this.user=e.user,this.forceUpdate();case 8:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"account"},r.a.createElement(O,{current:"account"}),r.a.createElement("h2",null,"Account"),r.a.createElement(E.d,null,r.a.createElement(E.r,null,r.a.createElement(E.b,this.colSize,r.a.createElement(E.f,{className:"mb-2"},r.a.createElement(E.g,{type:"prepend"},r.a.createElement(E.h,null,"Username")),r.a.createElement(E.e,{placeholder:"Username",disabled:!0,value:this.user?this.user.username:""})))),r.a.createElement(E.r,null,r.a.createElement(E.b,this.colSize,r.a.createElement(E.f,{className:"mb-2"},r.a.createElement(E.g,{type:"prepend"},r.a.createElement(E.h,null,"Password")),r.a.createElement(E.e,{onChange:this.changePassword,onKeyDown:this.onKeyDown,value:this.state.password,type:"password",autoComplete:"new-password",placeholder:"New Password"}),r.a.createElement(E.g,{type:"append"},r.a.createElement(E.a,{onClick:this.setPassword},"Save")))))),r.a.createElement(E.i,{open:null!==this.state.error,toggle:function(){return e.setState({error:null})}},r.a.createElement(E.k,null,"An Error Occurred"),r.a.createElement(E.j,null,this.state.error)))}}]),t}(n.Component)),U=(a(178),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={adminModalOpen:!1,error:null},a.deleteUser=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Are you sure you want to delete "+e+"?")){n.next=9;break}return n.next=3,f.a.awrap(v.fetch("auth/deleteUser",{username:e}));case 3:if(!(t=n.sent).error){n.next=7;break}return a.setState({error:t.error}),n.abrupt("return");case 7:a.users=a.users.filter((function(t){return t.username!==e})),a.forceUpdate();case 9:case"end":return n.stop()}}))},a.onKeyDown=function(e){"Enter"===e.key&&a.addUser()},a.addUser=function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.nameRef.value||!a.pwdRef.value){t.next=5;break}return t.next=3,f.a.awrap(v.fetch("auth/addUser",{username:a.nameRef.value,password:a.pwdRef.value}));case 3:(e=t.sent).error?a.setState({error:e.error}):(a.users.push({username:a.nameRef.value}),a.nameRef.value="",a.pwdRef.value="",a.forceUpdate());case 5:case"end":return t.stop()}}))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return v.admin()||this.setState({adminModalOpen:!0}),t.next=3,f.a.awrap(v.fetch("auth/listUsers"));case 3:e=t.sent,this.users=e.users,this.forceUpdate();case 6:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"users"},r.a.createElement(O,{current:"users"}),r.a.createElement("h2",null,"Users"),r.a.createElement(E.d,null,r.a.createElement(E.r,null,r.a.createElement(E.b,{lg:{size:6,offset:3},md:{size:8,offset:2},style:{marginBottom:12}},r.a.createElement("form",{autoComplete:"new-password",onSubmit:this.addUser},r.a.createElement(E.f,null,r.a.createElement(E.e,{onKeyDown:this.onKeyDown,type:"text",placeholder:"Username",autoComplete:"new-password",innerRef:function(t){t&&(e.nameRef=t)}}),r.a.createElement(E.e,{onKeyDown:this.onKeyDown,type:"password",placeholder:"Password",autoComplete:"new-password",innerRef:function(t){t&&(e.pwdRef=t)}}),r.a.createElement(E.g,{type:"append"},r.a.createElement(E.a,{onClick:this.addUser},"Add")))))),this.users?this.users.map((function(t){return r.a.createElement(E.r,{key:t.username},r.a.createElement(E.b,{lg:{size:6,offset:3},md:{size:8,offset:2}},r.a.createElement(E.f,{className:"user"},r.a.createElement(E.h,{className:t.admin?"adminuser":"regularuser"},t.username),t.admin?null:r.a.createElement(E.g,{type:"append"},r.a.createElement(E.a,{theme:"danger",size:"sm",outline:!0,pill:!0,onClick:function(){return e.deleteUser(t.username)}},r.a.createElement(w.a,{icon:y.f}))))))})):null),r.a.createElement(E.i,{open:null!==this.state.error,toggle:function(){return e.setState({error:null})}},r.a.createElement(E.k,null,"An Error Occurred"),r.a.createElement(E.j,null,this.state.error)),r.a.createElement(E.i,{open:this.state.adminModalOpen,toggle:function(){return e.props.history.replace("/")}},r.a.createElement(E.k,null,"Permission Needed"),r.a.createElement(E.j,null,"To manage users, you need admin privileges")))}}]),t}(n.Component)),z=(a(179),a(88)),D=a.n(z),R=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={value:"",invalid:!1},a.initInput=function(e){e&&(a.inputRef=e,e.value=a.props.value)},a.setProp=function(e){if("number"===a.props.accepts){if(isNaN(e)||!e)return void a.setState({invalid:!0});a.setState({invalid:!1})}v.fetch("things/".concat(a.props.thing,"/setProp"),{prop:a.props.name,value:e})},a.onKeyDown=function(e){"Enter"===e.key&&a.setProp(a.inputRef.value)},a.getEditComp=function(){switch(a.props.accepts){case"number":return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.f,{size:"sm"},r.a.createElement(E.e,{onKeyDown:a.onKeyDown,invalid:a.state.invalid,type:"number",placeholder:"Value",innerRef:function(e){return a.initInput(e)}}),r.a.createElement(E.g,{type:"append"},r.a.createElement(E.a,{size:"sm",onClick:function(){return a.setProp(a.inputRef.value)}},"Set"))));case"":case"string":return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.f,{size:"sm"},r.a.createElement(E.e,{onKeyDown:a.onKeyDown,type:"text",placeholder:"Value",innerRef:function(e){return a.initInput(e)}}),r.a.createElement(E.g,{type:"append"},r.a.createElement(E.a,{size:"sm",onClick:function(){return a.setProp(a.inputRef.value)}},"Set"))));case"boolean":return r.a.createElement(E.a,{onClick:function(){a.setState({value:String(!("true"==a.state.value))}),a.setProp(String(!("true"==a.state.value)))},className:"bool",size:"sm",theme:"true"==a.state.value?"success":"danger"},a.state.value);default:return r.a.createElement("div",{className:"slider-inp"},r.a.createElement("span",{className:"slidermin"},parseInt(a.props.accepts.split("-")[0])),r.a.createElement(E.s,{theme:"success",margin:0,onChange:function(e){return a.setState({value:String(parseInt(e[0]))})},connect:[!0,!1],start:[parseInt(a.state.value)],step:1,range:{min:parseInt(a.props.accepts.split("-")[0]),max:parseInt(a.props.accepts.split("-")[1])}}),r.a.createElement("span",{className:"slidermax"},parseInt(a.props.accepts.split("-")[1])),r.a.createElement(E.a,{size:"sm",onClick:function(){return a.setProp(a.state.value)}},"Set to ",a.state.value))}},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({value:this.props.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"prop"},r.a.createElement(E.r,null,r.a.createElement(E.b,{lg:"2",md:"2",xs:"4",sm:"3"},r.a.createElement("span",{className:"propname"},this.props.name)),r.a.createElement(E.b,null,this.getEditComp())))}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,errorFatal:!1,loading:!0,editingName:!1,name:"..."},a.addUser=function(){var e,t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=a.addUserRef.value,""!=a.addUserRef.value){n.next=4;break}return a.setState({error:"Enter a username first"}),n.abrupt("return");case 4:return n.next=6,f.a.awrap(v.fetch("things/".concat(a.props.match.params.uid,"/addUser"),{username:a.addUserRef.value}));case 6:t=n.sent,a.addUserRef.value="",t.error?a.setState({error:t.error}):t.alreadyAdded||(a.users.push({username:e}),a.forceUpdate());case 9:case"end":return n.stop()}}))},a.removeUser=function(e){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(v.fetch("things/".concat(a.props.match.params.uid,"/removeUser"),{username:e.username}));case 2:t.sent,a.users=a.users.filter((function(t){return t.username!=e.username})),a.forceUpdate();case 5:case"end":return t.stop()}}))},a.editName=function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.state.editingName||a.setState({name:a.thing.name}),a.setState({editingName:!a.state.editingName});case 2:case"end":return e.stop()}}))},a.saveName=function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a.setState({editingName:!1}),t.next=3,f.a.awrap(v.fetch("things/".concat(a.thing.uid,"/rename"),{name:a.state.name}));case 3:(e=t.sent).error?a.setState({error:e.error}):(a.thing.name=a.state.name,a.forceUpdate());case 5:case"end":return t.stop()}}))},a.onRenameKeyDown=function(e){"Enter"===e.key&&a.saveName()},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(v.fetch("things/".concat(this.props.match.params.uid)));case 2:if(null===(e=t.sent).error){t.next=6;break}return this.setState({error:"An error occurred while loading the thing: "+e.error,errorFatal:!0}),t.abrupt("return");case 6:if(this.thing=e.thing,this.setState({name:e.thing.name}),!v.admin()){t.next=12;break}return t.next=11,f.a.awrap(v.fetch("things/".concat(this.props.match.params.uid,"/getUsers")));case 11:this.users=t.sent.users;case 12:this.setState({loading:!1}),this.forceUpdate();case 14:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("div",{className:"thing"},r.a.createElement(O,{current:"thing"}),r.a.createElement("div",{className:"loading"},r.a.createElement(D.a,{type:"spin",color:"black"}))):r.a.createElement("div",{className:"thing"},r.a.createElement(O,{current:"thing"}),r.a.createElement("h2",null,this.state.editingName?r.a.createElement(E.f,{size:"sm",className:"editName"},r.a.createElement(E.e,{onKeyDown:this.onRenameKeyDown,placeholder:"Name",onChange:function(t){return e.setState({name:t.target.value})},value:this.state.name}),r.a.createElement(E.g,{type:"append"},r.a.createElement(E.a,{onClick:this.saveName,size:"sm"},"Save"))):this.thing?this.thing.name:"...",r.a.createElement("span",null,"Thing"),v.admin()?r.a.createElement(E.a,{onClick:this.editName,theme:this.state.editingName?"danger":"primary",className:"editBTN",outline:!0,pill:!0},r.a.createElement(w.a,{size:"sm",icon:this.state.editingName?y.e:y.b})):null),r.a.createElement(E.d,null,r.a.createElement(E.r,null,r.a.createElement(E.b,{lg:{size:8,offset:2}},r.a.createElement(E.r,null,r.a.createElement(E.b,null,r.a.createElement("h5",null,"Properties"))),this.thing?Object.keys(this.thing.props).map((function(t){return r.a.createElement(R,{key:t,thing:e.thing.uid,name:t,value:e.thing.data[t],accepts:e.thing.props[t]})})):null,v.admin()?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.r,null,r.a.createElement(E.b,null,r.a.createElement("h5",null,"Users"))),r.a.createElement(E.r,null,r.a.createElement(E.b,null,r.a.createElement("div",{className:"userlist"},this.users?this.users.map((function(t){return r.a.createElement("div",{key:t.username,className:"user"},t.username,r.a.createElement(w.a,{onClick:function(){return e.removeUser(t)},size:"xs",icon:y.e}))})):null,r.a.createElement(E.f,{size:"sm",className:"addthinguser"},r.a.createElement(E.e,{onKeyDown:function(t){"Enter"===t.key&&e.addUser()},type:"text",innerRef:function(t){t&&(e.addUserRef=t)}}),r.a.createElement(E.g,{type:"append"},r.a.createElement(E.a,{size:"sm",onClick:this.addUser},"Add"))))))):null))),r.a.createElement(E.i,{open:null!==this.state.error,toggle:function(){e.state.errorFatal?e.props.history.replace("/"):e.setState({error:null,errorFatal:!1})}},r.a.createElement(E.k,null,"An Error Occurred"),r.a.createElement(E.j,null,this.state.error)))}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,redirectTo:""},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")?this.setState({loading:!1,redirectTo:"/dashboard"}):this.setState({loading:!1,redirectTo:"/login"})}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.loading?r.a.createElement("p",null,"Loading..."):r.a.createElement(m.a,{to:this.state.redirectTo}))}}]),t}(n.Component);var T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(m.b,{exact:!0,path:"/",component:I}),r.a.createElement(m.b,{path:"/login",component:b}),r.a.createElement(m.b,{path:"/dashboard",component:x}),r.a.createElement(m.b,{path:"/account",component:P}),r.a.createElement(m.b,{path:"/users",component:U}),r.a.createElement(m.b,{path:"/thing/:uid",component:A}))))},M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(T,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");M?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):K(t,e)}))}}()},90:function(e,t,a){e.exports=a(180)},95:function(e,t,a){},96:function(e,t,a){},98:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.ffff008a.chunk.js.map